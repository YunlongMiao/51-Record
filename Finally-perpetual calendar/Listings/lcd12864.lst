C51 COMPILER V9.60.0.0   LCD12864                                                          03/13/2022 20:37:07 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD12864
OBJECT MODULE PLACED IN .\Objects\lcd12864.obj
COMPILER INVOKED BY: D:\EN\C51\BIN\C51.EXE 11.24c\lcd12864.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\lcd12864.lst) TABS(2) OBJECT(.\Objects\lcd12864.obj)

line level    source

   1          #include"lcd12864.h"
   2          //uchar sum[]={1,1,1,1,1,1,1,1};
   3          //uchar num[8];
   4          //½«8Î»¶ş½øÖÆÊıÖğÎ»Ğ´Èë
   5          void LCD_sendbyte(uchar dat);
   6          //Ğ´ÈëÃüÁî
   7          void write_com(uchar com);
   8          //Ğ´ÈëÊı¾İ
   9          void write_data(uchar dat) ;
  10          //LCD³õÊ¼»¯
  11          void initial_12864();
  12          //LCDÆÁÄ»µØÖ·¶¨Î»
  13          void LCD_Setaddress(uchar x, uchar y);
  14          //LCDÏÔÊ¾×Ö·ûÊı×é£¨ÎÄ×Ö£©
  15          void LCD_Putstring( uchar x, uchar y, uchar *pData );
  16          
  17          
  18          void Delayms(uint n)    //ÑÓÊ±Ê±¼äÎª 1ms * x ¾§ÕñÊÇ11.0592M
  19          {
  20   1        unsigned int i, j;
  21   1        for (i = n; i > 0; i--)
  22   1          for (j = 110; j > 0; j--);
  23   1      }
  24          
  25          
  26          
  27          void LCD_sendbyte(uchar dat) //½«8Î»¶ş½øÖÆÊıÖğÎ»Ğ´Èë
  28          {
  29   1        unsigned char i;
  30   1        for (i = 0; i < 8; i++) {
  31   2          SCLK = 0;
  32   2          if (dat & 0x80)
  33   2            SID = 1;
  34   2          else
  35   2            SID = 0;
  36   2          SCLK = 1;
  37   2          dat = dat << 1;     //×óÒÆÒ»Î»
  38   2        }
  39   1      }
  40          
  41          
  42          
  43          
  44          void write_com(uchar com) //Ğ´ÈëÃüÁî
  45          {
  46   1        LCD_sendbyte(0xf8);          //ËÍÈë5¸öÁ¬ĞøµÄ¡°1¡°£¬Æô¶¯Ò»¸öÖÜÆÚ,11111,RW(0),RS(0),0
  47   1        LCD_sendbyte(0xf0 & com);    //È¡¸ßËÄÎ»£¬Êı¾İ·ÖÁ½´Î´«ËÍ£¬Ã¿¸ö×Ö½ÚµÄÄÚÈİ±»ËÍÈëÁ½¸ö×Ö½Ú,¸ßËÄÎ»·ÅÔÚµÚÒ»¸ö×Ö½
             -ÚµÄ¸ßËÄÎ»
  48   1        LCD_sendbyte(0xf0 & (com << 4)); //µÍËÄÎ»·ÅÔÚµÚ¶ş¸ö×Ö½ÚµÄ¸ßËÄÎ»
  49   1        Delayms(1);                   //´®ĞĞ²»Ö§³Ö¶Á²Ù×÷£¬²»¿É¼ì²âÃ¦²Ù×÷£¬ÕâÀïÓÃÑÓÊ±Ìæ´ú
  50   1      }
  51          
  52          
  53          
C51 COMPILER V9.60.0.0   LCD12864                                                          03/13/2022 20:37:07 PAGE 2   

  54          
  55          void write_data(uchar dat) //Ğ´ÈëÊı¾İ
  56          {
  57   1        LCD_sendbyte(0xfa);
  58   1        LCD_sendbyte(0xf0 & dat);
  59   1        LCD_sendbyte(0xf0 & (dat << 4));
  60   1        Delayms(1);
  61   1      }
  62          
  63          
  64          
  65          
  66          void initial_12864()//LCD³õÊ¼»¯
  67          {
  68   1        write_com(0x30);    //Ñ¡Ôñ»ù±¾Ö¸Áî¼¯
  69   1        write_com(0x0c);    //¿ªÏÔÊ¾£¬ÎŞÓÎ±ê£¬²»·´°×
  70   1        write_com(0x01);    //Çå³ıÏÔÊ¾ÆÁÄ»£¬°ÑDDRAMÎ»Ö·¼ÆÊıÆ÷µ÷ÕûÎª00H
  71   1        Delayms(1);            //ÇåÆÁ²Ù×÷Ê±¼ä½Ï³¤1.6ms Òò´Ë¼Ó´ËÑÓÊ±
  72   1        write_com(0x02);    //ÇåDDRAMÎ»Ö·¹éÎ»,´Ë´¦Ã²ËÆÓëÇåÆÁÖØ¸´
  73   1        write_com(0x06);    //Éè¶¨¹â±êÓÒÒÆ£¬ÕûÌåÏÔÊ¾²»ÒÆ¶¯
  74   1      }
  75          
  76          
  77          
  78          void LCD_Setaddress(uchar x, uchar y)  //LCDÆÁÄ»µØÖ·¶¨Î»,µØÖ·´ÓµÚ1ĞĞµÚ1ÁĞ¿ªÊ¼²»´Ó0¿ªÊ¼£¨y£©
  79          {
  80   1        uchar addr;
  81   1        switch (x) {
  82   2          case 1:
  83   2            addr = 0x80 + y - 1;
  84   2            break;
  85   2          case 2:
  86   2            addr = 0x90 + y - 1;
  87   2            break;
  88   2          case 3:
  89   2            addr = 0x88 + y - 1;
  90   2            break;
  91   2          case 4:
  92   2            addr = 0x98 + y - 1;
  93   2            break;
  94   2          default :
  95   2            break;
  96   2        }
  97   1        write_com(addr);   //×Ö·ûÏÔÊ¾¿ªÊ¼µØÖ·
  98   1      }
  99          
 100          
 101          
 102          
 103          
 104          void LCD_Putstring( uchar x, uchar y, uchar *pData ) //LCDÏÔÊ¾×Ö·ûÊı×é£¨µØÖ·ÎÄ×Ö£©
 105          {
 106   1        LCD_Setaddress(x, y);
 107   1        while (*pData) {
 108   2          write_data( *pData++ );
 109   2        }
 110   1      }
 111          
 112          
 113          void Putstring(uchar *pData ) //LCDÏÔÊ¾×Ö·ûÊı×é£¨ÎÄ×Ö£©
 114          { 
 115   1        while (*pData) 
C51 COMPILER V9.60.0.0   LCD12864                                                          03/13/2022 20:37:07 PAGE 3   

 116   1          write_data( *pData++ );
 117   1      
 118   1      }
 119          void Show_number(uchar addr,uint num)   //ÏÔÊ¾Êı×Ö
 120          {
 121   1        char s[6];
 122   1        sprintf(s,"%-05d",num);
 123   1        write_com(addr);
 124   1        Putstring(s);
 125   1      }
 126          
 127          
 128          
 129          
 130          
 131          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    326    ----
   CONSTANT SIZE    =      6    ----
   XDATA SIZE       =   ----      13
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
